<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <meta http-equiv="X-UA-Compatible" content="ie=edge">    <title>尊享区</title>    <link rel="stylesheet" href="/public/qdd/css/zunxiang.css">    <link rel="stylesheet" type="text/css" href="<?php echo CSS_PATH;?>mobile/dist/css/swiper.min.css"/>    <script src="<?php echo CSS_PATH;?>mobile/js/MobileSlider.js"></script>    <script src="<?php echo CSS_PATH;?>mobile/js/angular.min.js"></script>    <script type="text/javascript" src="<?php echo CSS_PATH;?>mobile/cate/jquery.min.js"></script>    <script src="<?php echo CSS_PATH;?>mobile/dist/js/swiper.min.js"></script></head><body ng-app="scroll" ng-controller="Main" ng-cloak><div class="zxlbBox">    <!--<div class="zxlb">-->        <div class="swiper-container">            <div class="swiper-wrapper">                {foreach name="banner" item="b"}                <div class="swiper-slide"><a href="{$b.poster_url}"><img style="width: 100%;height: 170px;"  src="{$b.poster_picpath}" /></a></div>                {/foreach}            </div>            <div class="swiper-pagination"></div>        </div>    <!--</div>--></div><div class="zxMain">    <div class="zxcg">        <img src="/public/qdd/img/qddbzpy.png" alt="">    </div>    <ul class="zxtjList" when-scrolled="loadMore()">        <li ng-repeat="goods in items">            <a href="/mobile.php/goods/{{goods.proid}}">                <img src="{{goods.img}}" err-src="/public/Public/mobile/img/logo.png" alt="">                <div>                    <p>{{goods.proname}}</p>                    <span>市场价：{{goods.marketprice}}</span>                    <strong>尊享价：{{goods.enjoyprice}}</strong>                </div>            </a>        </li>    </ul></div><footer>    <a href="#">        <img src="/public/qdd/img/图层13.png" alt="">        <span>尊享</span>    </a>    <a href="/mobile.php">        <img src="/public/qdd/img/zuanshi.png" alt="">        <span>标准区</span>    </a>    <a href="/mobile.php/order/list">        <img src="/public/qdd/img/dingdan.png" alt="">        <span>订单</span>    </a></footer></body></html><script>    var mySwiper = new Swiper('.swiper-container', {        autoplay: true,//可选选项，自动滑动        loop: true,        pagination: {            el: '.swiper-pagination',            clickable: true,        },    })</script><script>    $(function(){        $('img').error(function() {            $(this).attr('src', "/public/Public/mobile/img/logo.png");        });        //首先将#back-to-top隐藏        $("#totop").hide();        //当滚动条的位置处于距顶部100像素以下时，跳转链接出现，否则消失        $(function () {            $(window).scroll(function(){                if ($(window).scrollTop()>100){                    $("#totop").fadeIn();                }                else                {                    $("#totop").fadeOut();                }            });            //当点击跳转链接后，回到页面顶部位置            $("#totop").click(function(){                $('body,html').animate({scrollTop:0},500);                return false;            });        });    });</script><script type="text/javascript">    // 定义模块    var scroll = angular.module('scroll', []);    // 定义滚动指令    scroll.directive('whenScrolled', function() {        return function(scope, elm, attr) {            // body窗口的滚动加载--需要Jquery            $(window).scroll(function () {                //滚动条距离顶部的距离                var scrollTop = $(window).scrollTop();                //滚动条的高度                var scrollHeight = $(document).height();                //窗口的高度                var windowHeight = $(window).height();                if (scrollTop + windowHeight >= scrollHeight) {                    scope.$apply(attr.whenScrolled);                }            });        };    });    scroll.directive('errSrc', function () {        return {            link: function (scope, element, attrs) {                element.bind('error', function () { //请求图片数据失败,加载err-src                    if (attrs.src != attrs.errSrc) {                        attrs.$set('src', attrs.errSrc);                    }                });                attrs.$observe('ngSrc', function(value) { //ng-src值为null,加载err-src                    if (!value && attrs.errSrc) {                        attrs.$set('src', attrs.errSrc);                    }                });            }        }    });    scroll.controller('Main', ['$scope','$http',        function ($scope, $http) {            // 当前页数            $scope.currentPage = 0;            // 总页数            $scope.totalPages = 1;            // 防止重复加载            $scope.busy = false;            // 存放数据            $scope.items = [];            // 请求数据方法            $scope.loadMore = function() {                if ($scope.currentPage < $scope.totalPages) {                    $scope.currentPage++;                    if ($scope.busy) {                        return false;                    }//                    $scope.busy = true;                    // 请求后台服务器                    $http.get("/api.php/goods/enjoylist?p="+$scope.currentPage)                        .success(function(response) {                            $scope.busy = false;                            //组织数据                            for (var i in response.data.data_list) {                                var img_url = response.data.data_list[i];                                $scope.items.push(img_url);                            }                            $scope.totalPages = response.data.total;                            $scope.show = response.show;                            $scope.issort = response.issort;                            $scope.type = response.type;                        });                }else{                    $('#jiazai').css('display','none');                }            };            // 默认第一次加载数据            $scope.loadMore();        }]);</script>