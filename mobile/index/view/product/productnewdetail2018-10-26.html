<!doctype html><html><head>    <meta charset="utf-8">    <title>搜索列表页</title>    <meta content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0,user-scalable=no" name="viewport" id="viewport">    <link href="<?php echo CSS_PATH;?>mobile/new/css/style.css" rel="stylesheet" type="text/css">    <link href="<?php echo CSS_PATH;?>mobile/new/css/reset.css" rel="stylesheet" type="text/css">    <script src="<?php echo CSS_PATH;?>mobile/new/js/mobile.js"></script>    <script src="<?php echo CSS_PATH;?>mobile/js/jquery-3.3.1.min.js"></script>    <script src="<?php echo CSS_PATH;?>mobile/js/MobileSlider.js"></script>    <script src="<?php echo CSS_PATH;?>mobile/js/angular.min.js"></script></head><body style="background: #2f2f2f" ng-app="scroll" ng-controller="Main" ng-cloak><div class="top">    <a href="javascript:history.back(-1);"><img src="<?php echo CSS_PATH;?>mobile/img/fanhui.png"></a>    <p>商品列表</p></div><div class="leibie">    <ul>        <li><a  href="/mobile.php/product" {if condition="$Request.param.sort eq ''"}class="quanbu" {/if}>全部商品</a></li>        <li><a href="/mobile.php/product?sort=1" {if condition="$Request.param.sort eq '1'"}class="quanbu"{/if}>销量</a></li>        <li><a href="/mobile.php/product?sort=2&type={{type}}" {if condition="$Request.param.sort eq '2'"}class="quanbu"{/if}>价格&nbsp;<span>			<img ng-if="issort =='1'" style=" width:10px;" src="<?php echo CSS_PATH;?>mobile/img/jiage1.png" alt="">			<img ng-if="issort =='2'" style=" width:10px;" src="<?php echo CSS_PATH;?>mobile/img/jiage3.png" alt="">			<img ng-if="issort =='3'" style=" width:10px;" src="<?php echo CSS_PATH;?>mobile/img/jiage2.png" alt="">		</span></a></li>    </ul></div><div when-scrolled="loadMore()">    <div style="background-color:#353535;float:left; width:100%; margin-top: 120px;">        <div ng-if="show =='0'" style="background: #2f2f2f;width:100%;height:100%;color: white;text-align:center;padding-top: 10px;font-size: 0.3rem">            <img width="10%" src="https://shop.glkqm.cn/public/Public/mobile/images/list_empty.png">            <br>            没有商品了</div>        <div class="zhanshi" ng-if="show =='1'">            <ul ng-repeat="goods in items">                <li style="width: 48%;margin: 1%">                    <a href="/mobile.php/goods/{{goods.proid}}">                        <img  src="{{goods.img}}" alt="">                        <p class="biaoti" style="overflow: hidden;text-overflow:ellipsis; white-space: nowrap;">{{goods.proname}}</p>                        <p class="jiage">￥{{goods.vipprice}} <span style="margin-left: 0.7rem">{{goods.prosum}}人付款</span></p>                    </a>                </li>            </ul>        </div>        <!--<p ng-if="show =='1'" id="jiazai" style="color: white;font-size: 18px;text-align: center;padding: 10px;">加载中</p>-->    </div></div></body><script type="text/javascript">    // 定义模块    var scroll = angular.module('scroll', []);    // 定义滚动指令    scroll.directive('whenScrolled', function() {        return function(scope, elm, attr) {            // body窗口的滚动加载--需要Jquery            $(window).scroll(function () {                //滚动条距离顶部的距离                var scrollTop = $(window).scrollTop();                //滚动条的高度                var scrollHeight = $(document).height();                //窗口的高度                var windowHeight = $(window).height();                if (scrollTop + windowHeight >= scrollHeight) {                    scope.$apply(attr.whenScrolled);                }            });        };    });    scroll.controller('Main', ['$scope','$http',        function ($scope, $http) {            // 当前页数            $scope.currentPage = 0;            // 总页数            $scope.totalPages = 1;            // 防止重复加载            $scope.busy = false;            // 存放数据            $scope.items = [];            // 请求数据方法            $scope.loadMore = function() {                if ($scope.currentPage < $scope.totalPages) {                    $scope.currentPage++;                    if ($scope.busy) {                        return false;                    }//                    $scope.busy = true;                    // 请求后台服务器                    $http.get("/api.php/goods/enjoylist?{$value}&p="+$scope.currentPage)                        .success(function(response) {                            $scope.busy = false;                            //组织数据                            for (var i in response.data.data_list) {                                var img_url = response.data.data_list[i];                                $scope.items.push(img_url);                            }                            $scope.totalPages = response.data.total;                            $scope.show = response.show;                            $scope.issort = response.issort;                            $scope.type = response.type;                        });                }else{                    $('#jiazai').css('display','none');                }            };            // 默认第一次加载数据            $scope.loadMore();        }]);    $(function(){        $('img').error(function() {            $(this).attr('src', "/public/Public/mobile/img/logos.png");        });        //首先将#back-to-top隐藏        $("#totop").hide();        //当滚动条的位置处于距顶部100像素以下时，跳转链接出现，否则消失        $(function () {            $(window).scroll(function(){                if ($(window).scrollTop()>100){                    $("#totop").fadeIn();                }                else                {                    $("#totop").fadeOut();                }            });            //当点击跳转链接后，回到页面顶部位置            $("#totop").click(function(){                $('body,html').animate({scrollTop:0},500);                return false;            });        });    });</script><script type="text/javascript" src="<?php echo CSS_PATH;?>mobile/script/global.js"></script><script type="text/javascript" src="<?php echo CSS_PATH;?>mobile/script/TouchSlide.1.1.js"></script><script type="text/javascript" src="<?php echo CSS_PATH;?>mobile/script/index.js"></script></html>